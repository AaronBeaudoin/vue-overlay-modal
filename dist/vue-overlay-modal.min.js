!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports.VueOverlayModal=t(require("lodash")):e.VueOverlayModal=t(e._)}(window,(function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(t,i){t.exports=e},function(e,t,i){"use strict";i.r(t);var n=i(0),o=function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:this.transition}},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.$modal[this.name].isActive,expression:"$modal[name].isActive"}],staticClass:"overlay-modal"},[this._t("default")],2)])};o._withStripped=!0;var l=function(e,t,i,n,o,l,s,r){var c,a="function"==typeof e?e.options:e;if(t&&(a.render=t,a.staticRenderFns=i,a._compiled=!0),n&&(a.functional=!0),l&&(a._scopeId="data-v-"+l),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},a._ssrRegister=c):o&&(c=r?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(a.functional){a._injectStyles=c;var u=a.render;a.render=function(e,t){return c.call(t),u(e,t)}}else{var d=a.beforeCreate;a.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:a}}({name:"overlay-modal",props:{name:{type:String,required:!0},transition:{type:String}},created(){this.$plugin=this.$options.pluginData},mounted(){this.$el.addEventListener("click",this.$modal[this.name].keepActive),document.addEventListener("click",this.handleGlobalClick),this.$plugin.instances+=1},destroyed(){document.removeEventListener("click",this.handleGlobalClick),this.$plugin.instances-=1},methods:{handleGlobalClick(e){let t=this.$plugin.modals[this.name];t.cancelClose?t.cancelClose=!1:t.isActive&&this.$plugin.closing.push(this.name),this.$plugin.completed+=1,this.$plugin.completed===this.$plugin.instances&&(Object(n.forEach)(this.$plugin.timeouts,e=>clearTimeout(e.id)),this.$plugin.timeouts=[],this.$plugin.closing.length>0&&this.handleClosingClick(e),this.$plugin.completed=0)},handleClosingClick(e){let t=this.$plugin.modals,i=this.$plugin.calculateTimeout,o=Object(n.map)(this.$plugin.closing,i);Object(n.forEach)(this.$plugin.closing,(e,i)=>o[i]-=t[e].closeSpeed),Object(n.forEach)(this.$plugin.closing,this.handleClosingTimeout(o)),this.$plugin.closing=[]},handleClosingTimeout(e){return(t,i)=>{let n=setTimeout(e=>this.$plugin.modals[t].isActive=!1,e[i]);this.$plugin.timeouts.push({id:n,modalName:t})}}}},o,[],!1,null,null,null);l.options.__file="src/OverlayModal.vue";var s=l.exports;i.d(t,"config",(function(){return c})),i.d(t,"install",(function(){return a}));let r=void 0;function c(e,t){void 0===t&&(t=window.Vue),function(e,t){void 0===t&&(t={});let i=Object(n.mapValues)(t,e=>{let t={isActive:!1,cancelClose:!1};return e.initActive&&(t.isActive=!0),{...e,...t}});Object(n.forEach)(r.modals,(t,i)=>e.delete(r.modals,i)),Object(n.forEach)(i,(t,i)=>e.set(r.modals,i,t)),s.pluginData=r}(t,e),function(e){e.prototype.$modal=e.observable({get $closeDelay(){return r.calculateTimeout()}}),Object(n.forEach)(r.modals,(t,i)=>{e.set(e.prototype.$modal,i,{get isActive(){return t.isActive},get closeSpeed(){return t.closeSpeed},keepActive(){t.cancelClose=!0},clickOpen(){t.isActive=t.cancelClose=!0},open(){t.isActive=!0},close(){t.isActive=!1}})})}(t)}function a(e,t){r={modals:e.observable({}),instances:0,completed:0,closing:[],timeouts:[],calculateTimeout(e){let t=r.modals,i=Object(n.filter)(Object(n.keys)(t),i=>t[i].parent===e&&t[i].isActive),o=void 0===e?0:t[e].closeSpeed;if(0===i.length)return o;{let e=e=>r.calculateTimeout(e);return Object(n.max)(Object(n.map)(i,e))+o}}},e.directive("open",{bind(e,t){e.addEventListener("click",t.value.clickOpen)}}),u.config(t,e),e.component(s.name,s),e.prototype.$debug=r}let u={config:c,install:a};t.default=u;"undefined"!=typeof window&&window.Vue&&window.Vue.use(u)}])}));